p8105_hw6_at3583
================
Alexandria D.Taylor,
2025-12-02

``` r
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE
)

library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   4.0.0     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(janitor)
```

    ## 
    ## Attaching package: 'janitor'
    ## 
    ## The following objects are masked from 'package:stats':
    ## 
    ##     chisq.test, fisher.test

``` r
library(broom)
library(purrr)
library(modelr)       
```

    ## 
    ## Attaching package: 'modelr'
    ## 
    ## The following object is masked from 'package:broom':
    ## 
    ##     bootstrap

``` r
library(p8105.datasets) 

# Global colors + theme for plots
primary_color <- "steelblue3"
accent_color  <- "darkorange2"

theme_set(
  theme_minimal(base_size = 12) +
    theme(
      plot.title = element_text(face = "bold"),
      legend.position = "bottom"
    )
)
```

# Problem 1. Homicides and Logistic Regression

``` r
# Load and Clean Homicide data from Washington Post 
homicide_df <- read_csv(
  "https://raw.githubusercontent.com/washingtonpost/data-homicides/master/homicide-data.csv"
) |>
  clean_names()

# Clean + filter for analysis
homicide_city <- homicide_df |>
  mutate(
    city_state = str_c(city, ", ", state),
    # binary outcome: 1 = solved, 0 = not solved
    solved = case_when(
      disposition == "Closed by arrest" ~ 1,
      disposition %in% c("Closed without arrest", "Open/No arrest") ~ 0,
      TRUE ~ NA_real_
    ),
    victim_age = as.numeric(victim_age)
  ) |>
  # drop cities with missing race or bad entry
  filter(
    !(city_state %in% c("Dallas, TX", "Phoenix, AZ", "Kansas City, MO", "Tulsa, AL")),
    victim_race %in% c("White", "Black")
  ) |>
  drop_na(solved, victim_age, victim_sex, victim_race)
```

Summary: The cleaned dataset contains **39403** homicide records across
**47\` cities**. After excluding cities without recorded race data
(Dallas, TX; Phoenix, AZ; Kansas City, MO; Tulsa, AL) and restricting
the analysis to victims who are White or Black, **39403** cases remain.
Victim age is a numeric variable, with **0** entries originally recorded
as non-numeric in the raw dataset and recorded as missing during
cleaning.

# Baltimore, MD – logistic regression + adjusted OR

``` r
baltimore_df <- homicide_city |>
  filter(city_state == "Baltimore, MD")

baltimore_fit <- glm(
  solved ~ victim_age + victim_sex + victim_race,
  data = baltimore_df,
  family = binomial()
)

baltimore_or <- baltimore_fit |>
  tidy(exponentiate = TRUE, conf.int = TRUE) |>
  filter(term == "victim_sexMale")

baltimore_or
```

    ## # A tibble: 1 × 7
    ##   term           estimate std.error statistic  p.value conf.low conf.high
    ##   <chr>             <dbl>     <dbl>     <dbl>    <dbl>    <dbl>     <dbl>
    ## 1 victim_sexMale    0.426     0.138     -6.18 6.26e-10    0.324     0.558
